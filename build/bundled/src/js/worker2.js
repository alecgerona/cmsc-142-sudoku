"use strict";var magic_board=[[1,0,0,0,2,0,0,0,4],[0,2,0,0,0,8,0,1,0],[0,0,3,0,4,0,2,0,0],[0,0,0,4,0,3,0,0,0],[0,1,0,0,5,0,0,4,0],[0,0,0,7,6,9,0,0,0],[0,0,6,0,7,0,8,0,0],[0,9,0,0,8,0,0,7,0],[8,0,7,0,9,0,0,0,6]],checkBox=function(r,o,e,n){for(var t=r.length,f=Math.sqrt(t),c=Math.floor(o/Math.sqrt(t))*f,a=Math.floor(e/Math.sqrt(t))*f,i=c;i<c+f;i++)for(var u=a;u<a+f;u++)if(n==r[i][u])return!1;return!0},checkRow=function(r,o,e){for(var n=r.length,t=0;t<n;t++)if(r[o][t]==e)return!1;return!0},checkCol=function(r,o,e){for(var n=r.length,t=0;t<n;t++)if(r[t][o]==e)return!1;return!0},checkY=function(r,o,e,n){var t=r.length,f=Math.floor((t-1)/2);if(o<f&&(o!=e||o!=t-1-e))return!0;if(o>=f&&e!=f)return!0;for(var c=f;c<t;c++)if(r[c][f]==n)return!1;if(e<=f)for(var c=0;c<f+1;c++)if(r[c][c]==n)return!1;if(e>=f)for(var c=0;c<f+1;c++)if(r[c][t-1-c]==n)return!1;return!0},checkX=function(r,o,e,n){var t=r.length,f=Math.floor(t/2);if(o!=e||e+o!=t-1)return!0;if(o<=f&&o==e)for(var c=0;c<t;c++)if(r[c][c]==n)return!1;if(o>=f&&o==t-1-e)for(var c=0;c<t;c++)if(r[c][t-1-c]==n)return!1;return!0},checker=function(r,o,e,n,t,f){var c=checkX(r,o,e,n),a=checkY(r,o,e,n),i=checkRow(r,o,n)&&checkCol(r,e,n)&&checkBox(r,o,e,n);return t&&(i=i&&c),f&&(i=i&&a),i},magic_solver=function(r,o){return solver(magic_board,r,o)},solver=function(r,o,e){for(var n=r.length,t=r.map(function(r){return r.slice()}),f=0,c=!1,a=0,i=0,u=0,h=[];;){for(;a<n;){for(;i<n;){u=1;var l;if(c){if(c&&a<0)return h;if(0!=r[a][i]||r[a][i]==n){i--,i<0&&(a--,i=n-1);continue}u=t[a][i]+1}if(0==r[a][i]){for(l=u;l<n+1;l++)if(checker(t,a,i,l,o,e)){c=!1,t[a][i]=l;break}l!=n+1?i++:(c=!0,t[a][i]=0,i--,i<0&&(a--,i=n-1))}else i++}i=0,a++}var s=t.map(function(r){return r.slice()});h.push(s),c=!0,f++,a--,i=n-1}},oneSolution=function(r){console.log(r[Math.floor(Math.random()*r.length)])};onmessage=function(r){console.log("@solver"),console.log("board"),postMessage(solver(r.data[0],r.data[1],r.data[2]))};